---
layout: post
title: 小飞象(DumboBFT)
tags:
- 共识协议
- DumboBFT
categories: 区块链
---
* TOC
  {:toc}

ACS：异步公共子集协议（Asynchronous Common Subset）
ABA：异步二进制协议（Asynchronous Binary Agreement protocol）
RBC：可靠广播协议(Reliable Broadcast Protocol）

摘要。HoneyBadgerBFT是Miller等人[35]提出的第一个实用的异步原子广播协议，它展示了令人印象深刻的性能。 HoneyBadgerBFT (HB-BFT)的核心是利用Ben-Or等人的异步公共子集协议(ACS)实现批处理共识，由n个可靠广播协议(RBC)组成，每个节点提出自己的输入，然后n个异步二进制协议(ABA)对每个建议值(n为节点总数)做出决策。

本文提出了两种新的原子广播协议(Dumbo1, Dumbo2)，它们都具有渐近的和实际的更好的效率。特别是，Dumbo1的ACS只运行很小的$\kappa$个ABA实例(独立于n个实例)，而Dumbo2的ACS进一步将其降低为常数!我们的技术的核心是两个主要的观察结果:(1)减少ABA实例的数量显著提高效率;(2)更谨慎地使用多值验证拜占庭协议(multi-value validated Byzantine agreement, MVBA)，该协议被认为是[35]中ACS的次优方案，实际上可以导致更有效的ACS。

我们实现了Dumbo1和Dumbo2，并在100 Amazon EC2 t2上部署了它们和HB-BFT。介质实例均匀分布在全球10个不同的地区，并在相同的环境中进行广泛的实验。实验结果表明，我们的协议在延迟和吞吐量上都比HoneyBadgerBFT提高了好几倍，特别是当系统规模变大时。

<!--more-->  

# 1 介绍

拜占庭容错(BFT)协议使一组不受信任的对等体能够达成共识。作为分布式计算的一个基础研究领域，该问题已经得到了广泛的研究。BFT协议的一个主要分类是基于时间(或网络)假设。同步BFT协议假定所有诚实对等体发送的值都将在一定的时间内发送给接收方，这是每个人(包括协议设计者)都知道的。而部分同步的BFT协议则放宽了这一网络需求，允许存在但未知的时间限制。异步BFT协议最不依赖于网络假设，即它不需要存在这样的时间限制，只需要所有的值最终都会被传递。

最受欢迎的异步BFT。在早些年，考虑到BFT协议主要部署在对等体连接良好的传统内部场景中，BFT的研究努力集中在减少(加密)计算[5,41]，或增加协议可以容忍[21]的恶意参与者的阈值，假设网络是同步的。近年来，关于同步设置的Nice工作不断出现[11,1,33]。放松网络同步假设的努力也存在。一个值得注意的例子是经典的实用拜占庭容错(PBFT)协议[18]，它需要部分同步。然而，由于鲁棒性和效率的原因，在实际应用中完全取消同步假设变得越来越可取。

最近，加密货币和区块链技术的成功总体上为BFT协议带来了更广泛的应用场景，也证明了在广域网(WAN)上达成共识的可能性。开放的互联网环境提供了一个更具对抗性的设置，即对等体之间的网络延迟可以是时变的。然而，同步(或部分同步)BFT只能在连接良好的节点的相对“私有”网络中执行，以保证网络在一定的时间范围内交付。如果时间假设不成立，这些协议将无法取得进展，并陷入停滞。事实上，最近的工作[35]正式表明PBFT在“间歇同步网络”中无法取得任何进展，在这种网络中，对手只选择在特定的时间点延迟消息。这种“攻击”同样适用于一类基于leader的BFT协议[4,10,20,19,42,5]。

异步协议的另一个重要原因可能是由于效率，特别是一个称为响应性的属性。在设计同步BFT协议时，用假定的网络延迟作为参数，通常选择较大的网络延迟，使实际的网络延迟确实更小，从而保证了同步假设。因此，大多数同步BFT协议的效率取决于假定的网络延迟。而“响应性”则要求性能只与实际的网络延迟相关，因此它不应该依赖于任何计时假设，只要消息被传递，协议就会推进。

此外，众所周知，异步协议在实际构建分布式系统时大大简化了工程工作，因为不需要超时机制。在构建实现同步协议的系统时，应该设计各种特别的、容易出错的超时机制。

**第一个实用的异步BFT[35]**。尽管在真实的广域网中部署异步BFT在很多情况下是可取的，甚至是必要的，但在[35]中提出第一个实用的协议HoneyBadgerBFT之前，大多数关于异步BFT的研究都是理论上的。以前的异步BFT协议通常是低效的，例如，通信复杂度(每条消息)很高(如果有n个对等体，可以达到$O(n^2)$甚至O$(n^3)$[26,41,15,9,17,2]。随着系统规模的扩大，这些协议的性能将急剧下降。另一方面，HoneyBadgerBFT[35]的出色工作，提供了一些关键的观察结果，推动异步BFT向实用的方向发展。

第一个观察结果是，原子广播协议是对维护不断增长日志的BFT协议的持续执行(或者换句话说，常规BFT协议可以被视为它的一次性实例)，可以从称为异步公共子集(asynchronous common subset, ACS)的较弱变体和阈值加密方案轻松构建。ACS协议只要求对等体对它们所有输入的一个子集达成一致，最初提出这个协议是为了不同的目的[7]。

![The structure of ACS in HoneyBadgerBFT](/static/img/ACS_HoneyBadgerBFT.png)

更重要的是，在[35]中观察到，Ben-Or等人[23]提出的经典ACS协议在渐近和实际效率上都更有希望（比另一种称为多值验证拜占庭协议（MVBA）的相关协议 ）[15]（稍后将进一步解释），请仔细选择底层构建基块。 [9,35]中的ACS协议是基于两个子协议构建的：可靠广播（RBC）和异步二进制协议（ABA）。 结构非常简单：每个节点都调用RBC广播其输入值，并参与ABA协议的n个实例，以商定要包括哪些输入子集，见图1。

实验结果表明，HoneyBadgerBFT具有良好的性能。在[22]的出色工作中，作者对考虑不同部署场景时HB-BFT最合适的构建块实例(同时保持协议结构完整)进行了广泛的研究。我们选择了不同的道路，提出了以下问题:

  *我们能否重新设计ACS协议以提高其渐近性和实用性?*
  
1.1 我们的贡献

我们设计了两种新的ACS协议，这两种协议都能渐进地提高系统的运行时间。我们的实验结果表明，当它们在Amazon AWS上的相同环境中反复运行时，比HoneyBad- gerBFT[35]有了成倍的改进。更有趣的是，我们的两个主要观察结果(1。应该减少ABA实例的数量;2. 如果对ACS谨慎使用，MVBA将更有效)，导致我们的两个协议更有独立性
。让我们在下面详细说明。

Dumbo1:更快的异步BFT。首先，我们稍微详细地回顾一下HB-BFT中使用的ACS协议的结构:首先，每个对等体通过一个RBC实例广播其输入;当对等体从对等体Pi接收到值时，它将第i个ABA实例的输入设置为1，并启动ABA协议。一旦一个诚实的对等体从n - f ABA实例中得到1，它将输入0到所有剩余的还没有输入的ABA实例，然后继续。


- [Honey Badger of BFT](https://zhuanlan.zhihu.com/p/44524558)